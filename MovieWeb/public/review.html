<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Movie Preview</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="./assets/css/style_review.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    
    <!-- Fonts CSS -->
    <link rel="stylesheet" href="assets/css/material-design-iconic-font.min.css">
    
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/css/plugins.css">
    
    <!-- Main Style CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/style1.css">

    
    <!-- Modernizer JS -->
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <style>
        body{
            background-color: black;
        }
        .container1{
            background-color: black;
        }
    </style>
    
</head>

<body>
    <header class="header-area">
        <div class="container-fluid1">
            <div class="header-wrap header-netflix-style">
                <div class="logo-menu-wrap">
                    <!-- Logo -->
                    <div class="logo">
                        <a href="index-4.html"><img src="assets/images/logo.png" alt=""></a>
                    </div>
                    <!-- Logo -->
                    <div class="main-menu main-theme-color-four">
                        <nav class="main-navigation">
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li><a href="#">Pages</a>
                                    <ul class="sub-menu">
                                        <li><a href="aboutus.html">About Us</a></li>
                                        <li><a href="pricing-plan-2.html">Pricing</a></li>
                                        <!-- <li><a href="watchlist.html">Watchlist</a></li> -->
                                        <li><a href="history2.html">History</a></li>
                                        <!-- <li><a href="movie-details.html">Movie details</a></li> -->
                                        <!-- <li><a href="series-details.html">Series details</a></li> -->
                                        <li><a href="account.html">My Account</a></li>
                                        <!-- <li><a href="landing-page.html">Landing Page</a></li> -->
                                    </ul>
                                </li>
                                <li><a href="pricing-plan-2.html">Pricing</a></li>
                                <li><a href="type.html">Search</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="right-side">
                    <!-- our-profile-area start -->
                    <div class="our-profile-area">
                        <a href="account.html" class="our-profile-pc" data-bs-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <img class="img-avatar" src="assets/images/default-avatar2.png" alt="">
                        </a>
                    </div>
                    <!-- our-profile-area end -->
                    <div class="subscribe-btn-wrap">
                        <button onclick="window.location.href='login-original.html'" type="button" data-bs-toggle="modal"
                            data-bs-target="#exampleModal" class="subscribe-btn">Login Now</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="main-wrapper">
   
        
        <!-- Breadcrumb -->
        <div class="breadcrumb-area breadcrumb-modify-padding bg-black-3  container1">
            <div class="container " >
                <div class="in-breadcrumb">
                    <div class="row">
                        <div class="col" id="movie-info">
                            <!-- <div class="breadcrumb-style-2">
                                <h2>${moviedetail.title}</h2>
                               
                                <ul class="breadcrumb-list-2" id="movie-info">
                                    <li>${moviedetail.genre}</li>
                                    <li>${moviedetail.year}</li>
                                </ul>
                                
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--// Breadcrumb -->
        <div class="movie-details-wrap section-ptb-50 bg-black">
            <div class="container" id="movie-details">
                <!-- <div class="video-wrap">
                    <video controls loop="loop" poster="${movie.thumbnail_path}">
                        <source src="assets/video/video.mp4">
                    </video>
                </div>
                <div class="movie-details-content">
                    <div class="movie-details-info">
                        <ul>
                            <li><span>Director:</span>${moviedetail.director}</li>
                            <li><span>Actors:</span>${moviedetail.actors}</li>
                        </ul>
                    </div>
                    <p>${moviedetail.plot}</p>

                </div>
                <div class="movie-btn"> 
                    <a href="watchmovie.html"    class="btn-style-hm4-2 animated">Watch now</a> 
                </div> -->
            </div>
        </div>

        <!-- Footer Area -->

        <!--// Footer Area -->
        <!-- Modal -->
    </div>
    <script>
        
        // Tạo một đối tượng XMLHttpRequest

        var xhr = new XMLHttpRequest();
        
        var movieid = new URLSearchParams(window.location.search).get('movie_id');

        // Thiết lập phương thức và địa chỉ endpoint mà bạn muốn gửi yêu cầu GET
        xhr.open('GET', `http://localhost:3000/review/${movieid}`); // Sử dụng template literals để chèn biến movieid vào URL


        // Xử lý sự kiện khi yêu cầu hoàn thành
        xhr.onload = function () {
            if (xhr.status === 200) {
                // Nếu yêu cầu thành công, lấy dữ liệu từ phản hồi và lưu vào biến moviedetail
                var moviedetail = JSON.parse(xhr.responseText);
                console.log('Movie Detail:', moviedetail);

                // Lấy ra phần tử có id là "movie-details" để thêm nội dung vào đó
                var movieContainer = document.getElementById('movie-details');

                // Tạo một chuỗi HTML dựa trên thông tin phim
                var moviecontent = `                

                    <div class="video-wrap">
                        <video controls loop="loop" poster="">
                            <source src="${moviedetail.trailer}">
                        </video>
                    </div>
                    <div class="movie-details-content">
                        <div class="movie-details-info">
                            <ul>
                                <li><span>Director:</span>${moviedetail.director}</li>
                                <li><span>Actors:</span>${moviedetail.actors}</li>
                                <li><span>Views:</span>${moviedetail.views}</li>                                
                            </ul>
                        </div>
                        <p>${moviedetail.plot}</p>

                    </div>
                    <div class="movie-btn"> 
                        <a href="watch_movie.html?movie_id=${movieid}"    class="btn-style-hm4-2 animated">Watch now</a> 
                    </div>

 
                `;
                // Thêm nội dung vào phần tử "movie-details"
                movieContainer.innerHTML = moviecontent;
                var movieinfoContainer = document.getElementById('movie-info');
                var moviecontent1 = `
                    <div class="breadcrumb-style-2">
                                    <h2>${moviedetail.title}</h2>
                                    <!-- breadcrumb-list start -->
                                    <ul class="breadcrumb-list-2" id="movie-info">
                                        <li>${moviedetail.genre}</li>
                                        <li>${moviedetail.year}</li>
                                    </ul>
                                    <!-- breadcrumb-list end -->
                    </div>
                `
                movieinfoContainer.innerHTML = moviecontent1;
            } else {
                // Nếu có lỗi xảy ra, hiển thị thông báo lỗi
                console.error('Request failed. Status:', xhr.status);
            }
        };

        // Xử lý sự kiện khi có lỗi xảy ra trong quá trình gửi yêu cầu
        xhr.onerror = function () {
            console.error('Request failed. Network error.');
        };

        // Gửi yêu cầu
        xhr.send();



    </script>
</body>

</html>